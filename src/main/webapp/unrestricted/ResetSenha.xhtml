<ui:composition template="/WEB-INF/template/LayoutLogin.xhtml" 
      xmlns="http://www.w3.org/1999/xhtml"
 	  xmlns:h="http://xmlns.jcp.org/jsf/html"
 	  xmlns:f="http://xmlns.jcp.org/jsf/core"
 	  xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	  xmlns:p="http://primefaces.org/ui"
	  action="#{esqueciSenha.validarToken(requestScope.token)}" autoRun="true">

	<ui:define name="titulo">èpCafé</ui:define>	

	<ui:define name="corpo">
	<f:metadata>
    	<f:event type="preRenderView" listener="#{esqueciSenhaBean.validarToken()}"/>
	</f:metadata>
		<h:form id="formEsqueciSenha"  >


			<div class="card" style="text-align:center">
				<p:splitter style="height: 300px" layout="vertical">
					<p:splitterPanel styleClass="flex align-items-center justify-content-center" >
						<div class="contact-container">
							<br></br><br></br><br></br>
							<h:graphicImage library="imagens"
								name="cafe.png" width="150" />
						</div>
						<br></br>
					</p:splitterPanel>

					<p:splitterPanel styleClass="flex align-items-center justify-content-center">
						<div class="card" >						
							<p:messages id="msg" showDetail="false" closable="true" redisplay="false">
							</p:messages>
							
							<h:panelGrid id="autenticar" columns="1" cellpadding="2" style="margin:0 auto">

									<p:outputLabel for="novaSenha1" value="Nova senha: " style="font-weight:bold" />
									<p:password id="novaSenha1" value="#{esqueciSenhaBean.novaSenha1}"
									 	feedback="true"
									 	toggleMask="true" 
									 	redisplay="true"
										size="40" maxlength="30" title="Nova Senha" 
										label="Nova senha"
										placeholder="Digite a senha" 
										required="true"
										disabled="#{autoCadUserBean.ok}"
										validatorMessage="As senhas devem conter de 6 a 30 caracteres."
										requiredMessage="É necessário que você informe sua senha.">
										<f:validateLength minimum="6" maximum="30" />
									</p:password>
								
									<p:outputLabel for="novaSenha2" value="Confirmar nova senha:" style="font-weight:bold"/>
									<p:password id="novaSenha2" value="#{esqueciSenhaBean.novaSenha2}"
										size="40" maxlength="30" title="Senha Redigitada"	
										toggleMask="true" 
									 	redisplay="true"									
										placeholder="Redigite a senha" 
										required="true">
									</p:password>
								
									<p:commandButton id="bt1" value="Enviar" icon="pi pi-check" styleClass="p-mr-2"
										rendered="#{not loginBean.autenticado}" 
										action="#{esqueciSenhaBean.enviar}"
										update="msg"
										process="@this novaSenha1 novaSenha2"/>
								
							</h:panelGrid>
							<br></br>
							<div class="card">
							    <p:link outcome="/Home.xhtm" value="Voltar para o site" styleClass="p-mr-2"/>
							</div>
							
						</div>
					</p:splitterPanel>
				</p:splitter>
			</div>

			<div>
				<h:graphicImage library="imagens" name="gaian_paleta_esquerda.png" width="250" height="900" />
			</div>
		</h:form>
	
	</ui:define>
</ui:composition>